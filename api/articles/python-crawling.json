{"title":"安装python采集环境","uid":"1089c2219ae72b6f52934db473c1fad8","slug":"python-crawling","date":"2022-12-20T09:54:59.000Z","updated":"2022-12-27T09:00:37.934Z","comments":true,"path":"api/articles/python-crawling.json","keywords":null,"cover":[],"content":"<p><img src=\"/images/202212/pyhton.png\" alt=\"pyhton\"></p>\n<h2 id=\"安装chrome浏览器\"><a href=\"#安装chrome浏览器\" class=\"headerlink\" title=\"安装chrome浏览器\"></a>安装chrome浏览器</h2><h3 id=\"1、更新系统\"><a href=\"#1、更新系统\" class=\"headerlink\" title=\"1、更新系统\"></a>1、更新系统</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update sudo apt upgrade</span><br></pre></td></tr></table></figure>\n<h3 id=\"2、安装依赖\"><a href=\"#2、安装依赖\" class=\"headerlink\" title=\"2、安装依赖\"></a>2、安装依赖</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install libxss1 libappindicator1 libindicator7 sudo apt-get install unzip sudo apt-get install dpkg sudo apt-get install xvfb sudo apt-get install python3-pip</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、下载安装包\"><a href=\"#3、下载安装包\" class=\"headerlink\" title=\"3、下载安装包\"></a>3、下载安装包</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、安装chrome\"><a href=\"#4、安装chrome\" class=\"headerlink\" title=\"4、安装chrome\"></a>4、安装chrome</h3><p>安装chrome，安装过程中由于缺少一些依赖而报错是正常的</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo dpkg -i google-chrome-stable_current_amd64.deb</span><br></pre></td></tr></table></figure>\n<p>#自动安装刚才缺少的依赖 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install -f</span><br></pre></td></tr></table></figure>\n\n<p>查看google 浏览器</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">whereis google-chrome</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5、安装ChromeDriver\"><a href=\"#5、安装ChromeDriver\" class=\"headerlink\" title=\"5、安装ChromeDriver\"></a>5、安装ChromeDriver</h3><p>下载安装包，这里要重点注意，一定要下载最新版本的chromedriver，这样才能确保跟chrome的版本匹配。</p>\n<p>去chromedriver官网 <a href=\"https://chromedriver.chromium.org/\">https://chromedriver.chromium.org/</a><br>找到当前最新的版本号，如下图所示代表当前最新的版本号是107.0.5304.62</p>\n<p>下载的时候只需要输入下面的命令即可，如果最新版本不是107.0.5304.62，只需要把下面107.0.5304.62替换成新版本的具体版本号即可。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -N https://chromedriver.storage.googleapis.com/107.0.5304.62/chromedriver_linux64.zip</span><br></pre></td></tr></table></figure>\n\n<p>解压缩刚下载的安装包</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unzip chromedriver_linux64.zip</span><br></pre></td></tr></table></figure>\n<p>移动</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">mv</span> -f chromedriver /usr/local/share/chromedriver</span><br></pre></td></tr></table></figure>\n\n<p>建立软链接</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo <span class=\"built_in\">ln</span> -s /usr/local/share/chromedriver /usr/local/bin/chromedriver sudo <span class=\"built_in\">ln</span> -s /usr/local/share/chromedriver /usr/bin/chromedriver</span><br></pre></td></tr></table></figure>\n\n<p>查看安装版本号 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chromedriver --version</span><br></pre></td></tr></table></figure>\n\n<p>##安装python的selenium以及其他相关依赖</p>\n<h2 id=\"安装-selenium\"><a href=\"#安装-selenium\" class=\"headerlink\" title=\"安装 selenium\"></a>安装 selenium</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install selenium</span><br></pre></td></tr></table></figure>\n\n<p>由于python自带的urllib3模块存在问题，所以需要更新或重新安装，否则等下在python里面使用chrome时会报错TypeError: urlopen() got multiple values for keyword argument ‘body’</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo pip3 install -U urllib3</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install lxml pip3 install <span class=\"string\">&quot;urllib3&lt;=1.24&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>测试通过python的selenium调用chrome</p>\n<p>输入python3命令进入python3的交互式界面</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"后台运行命令：\"><a href=\"#后台运行命令：\" class=\"headerlink\" title=\"后台运行命令：\"></a>后台运行命令：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">nohup</span> python3 -u /home/wwwroot/start.py &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看python进程\"><a href=\"#查看python进程\" class=\"headerlink\" title=\"查看python进程\"></a>查看python进程</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep python</span><br></pre></td></tr></table></figure>","feature":true,"text":" 安装chrome浏览器1、更新系统1sudo apt-get update sudo apt upgrade 2、安装依赖1sudo apt-get install libxss1 libappindicator1 libindicator7 sudo apt-get inst...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":3,"path":"api/categories/笔记.json"}],"tags":[{"name":"python","slug":"python","count":1,"path":"api/tags/python.json"},{"name":"采集","slug":"采集","count":1,"path":"api/tags/采集.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85chrome%E6%B5%8F%E8%A7%88%E5%99%A8\"><span class=\"toc-text\">安装chrome浏览器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F\"><span class=\"toc-text\">1、更新系统</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96\"><span class=\"toc-text\">2、安装依赖</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85\"><span class=\"toc-text\">3、下载安装包</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81%E5%AE%89%E8%A3%85chrome\"><span class=\"toc-text\">4、安装chrome</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5%E3%80%81%E5%AE%89%E8%A3%85ChromeDriver\"><span class=\"toc-text\">5、安装ChromeDriver</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-selenium\"><span class=\"toc-text\">安装 selenium</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4%EF%BC%9A\"><span class=\"toc-text\">后台运行命令：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8Bpython%E8%BF%9B%E7%A8%8B\"><span class=\"toc-text\">查看python进程</span></a></li></ol></li></ol>","author":{"name":"6ird","slug":"6ird","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录互联网的那些事儿！","socials":{"github":"https://github.com/TriDiamond","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"mapped":true,"prev_post":{"title":"ubuntu改密钥登录与时区时间","uid":"c070e94dae14088f5f79d1b076658719","slug":"ubuntu-keylogin-time","date":"2022-12-28T09:54:59.000Z","updated":"2022-12-28T06:31:22.249Z","comments":true,"path":"api/articles/ubuntu-keylogin-time.json","keywords":null,"cover":[],"text":" 一、改密钥登录1.authorized_keys上传到服务器某个用户的~&#x2F;.ssh目录下2.修改服务器ssh配置进入ssh的配置文件： 1vim /etc/ssh/sshd_config 进行如下配置： 去掉注释 1AuthorizedKeysFile %h/.ssh...","link":"","photos":[],"count_time":{"symbolsCount":470,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":3,"path":"api/categories/笔记.json"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","count":1,"path":"api/tags/Ubuntu.json"},{"name":"密钥登录","slug":"密钥登录","count":1,"path":"api/tags/密钥登录.json"},{"name":"时区时间","slug":"时区时间","count":1,"path":"api/tags/时区时间.json"}],"author":{"name":"6ird","slug":"6ird","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录互联网的那些事儿！","socials":{"github":"https://github.com/TriDiamond","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"feature":true},"next_post":{"title":"使用acme申请google ssl证书","uid":"df96f11d8264a9a9b5c99533bffecbed","slug":"acme-google-ssl","date":"2022-12-20T09:46:31.000Z","updated":"2022-12-20T10:32:54.377Z","comments":true,"path":"api/articles/acme-google-ssl.json","keywords":null,"cover":"https://cover.png","text":"获取Google account key首先登录 https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=XXXXX 如果没有权限就点启用,然后点右上角的激活 cloud shel...","link":"","photos":[],"count_time":{"symbolsCount":968,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":3,"path":"api/categories/笔记.json"}],"tags":[{"name":"acme","slug":"acme","count":1,"path":"api/tags/acme.json"},{"name":"google","slug":"google","count":1,"path":"api/tags/google.json"},{"name":"ssl","slug":"ssl","count":1,"path":"api/tags/ssl.json"}],"author":{"name":"6ird","slug":"6ird","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录互联网的那些事儿！","socials":{"github":"https://github.com/TriDiamond","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"feature":true}}