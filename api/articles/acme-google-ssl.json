{"title":"使用acme申请google ssl证书","uid":"df96f11d8264a9a9b5c99533bffecbed","slug":"acme-google-ssl","date":"2022-12-20T09:46:31.000Z","updated":"2022-12-20T10:32:54.377Z","comments":true,"path":"api/articles/acme-google-ssl.json","keywords":null,"cover":"https://cover.png","content":"<h2 id=\"获取Google-account-key\"><a href=\"#获取Google-account-key\" class=\"headerlink\" title=\"获取Google account key\"></a>获取Google account key</h2><h3 id=\"首先登录\"><a href=\"#首先登录\" class=\"headerlink\" title=\"首先登录\"></a>首先登录</h3><p> <a href=\"https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=XXXXX\">https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=XXXXX</a> </p>\n<p> 如果没有权限就点启用,然后点右上角的激活 cloud shell ,成功授权后在 Cloud Shell 获取需要签发的key 输入 </p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcloud beta publicca external-account-keys create</span><br></pre></td></tr></table></figure>\n<h3 id=\"复制，如下key\"><a href=\"#复制，如下key\" class=\"headerlink\" title=\"复制，如下key:\"></a>复制，如下key:</h3><p>Created an external account key [b64MacKey: XXXXXXXXXXXX keyId: XXXXXXX]</p>\n<h2 id=\"下载acme\"><a href=\"#下载acme\" class=\"headerlink\" title=\"下载acme\"></a>下载acme</h2><h3 id=\"下载命令：\"><a href=\"#下载命令：\" class=\"headerlink\" title=\"下载命令：\"></a>下载命令：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O- https://get.acme.sh | sh</span><br></pre></td></tr></table></figure>\n<h3 id=\"重启\"><a href=\"#重启\" class=\"headerlink\" title=\"重启\"></a>重启</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改acme默认服务为google\"><a href=\"#修改acme默认服务为google\" class=\"headerlink\" title=\"修改acme默认服务为google\"></a>修改acme默认服务为google</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">acme.sh --set-default-ca --server google</span><br></pre></td></tr></table></figure>\n<h3 id=\"写入Google-key\"><a href=\"#写入Google-key\" class=\"headerlink\" title=\"写入Google key\"></a>写入Google key</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">acme.sh --register-account -m www@mail.com --server google</span><br><span class=\"line\">--eab-kid XXXXXX</span><br><span class=\"line\">--eab-hmac-key XXXX</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"导入dns服务商key（CF为例）\"><a href=\"#导入dns服务商key（CF为例）\" class=\"headerlink\" title=\"导入dns服务商key（CF为例）\"></a>导入dns服务商key（CF为例）</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> CF_Key=<span class=\"string\">&quot;XXXX&quot;</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CF_Email=<span class=\"string\">&quot;www@mail.com&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"申请证书\"><a href=\"#申请证书\" class=\"headerlink\" title=\"申请证书\"></a>申请证书</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">acme.sh --issue --dns dns_cf -d XXXX.com -d *.XXXX.com</span><br></pre></td></tr></table></figure>\n<h3 id=\"迁移证书到指定文件夹\"><a href=\"#迁移证书到指定文件夹\" class=\"headerlink\" title=\"迁移证书到指定文件夹\"></a>迁移证书到指定文件夹</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">acme.sh --installcert -d XXXX.com</span><br><span class=\"line\">--key-file /home/vhost/cert/XXXX.com/XXXX.com.key</span><br><span class=\"line\">--fullchain-file /home/vhost/cert/XXXX.com/XXXX.com.cer</span><br><span class=\"line\">--reloadcmd <span class=\"string\">&quot;/usr/sbin/nginx -s reload -c /etc/nginx/nginx.conf&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"更新证书命令\"><a href=\"#更新证书命令\" class=\"headerlink\" title=\"更新证书命令\"></a>更新证书命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">acme.sh --renew -d XXXX.com --force</span><br></pre></td></tr></table></figure>","feature":true,"text":"获取Google account key首先登录 https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=XXXXX 如果没有权限就点启用,然后点右上角的激活 cloud shel...","link":"","photos":[],"count_time":{"symbolsCount":968,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":3,"path":"api/categories/笔记.json"}],"tags":[{"name":"acme","slug":"acme","count":1,"path":"api/tags/acme.json"},{"name":"google","slug":"google","count":1,"path":"api/tags/google.json"},{"name":"ssl","slug":"ssl","count":1,"path":"api/tags/ssl.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96Google-account-key\"><span class=\"toc-text\">获取Google account key</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A6%96%E5%85%88%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">首先登录</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%8D%E5%88%B6%EF%BC%8C%E5%A6%82%E4%B8%8Bkey\"><span class=\"toc-text\">复制，如下key:</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BDacme\"><span class=\"toc-text\">下载acme</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BD%E5%91%BD%E4%BB%A4%EF%BC%9A\"><span class=\"toc-text\">下载命令：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%87%8D%E5%90%AF\"><span class=\"toc-text\">重启</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9acme%E9%BB%98%E8%AE%A4%E6%9C%8D%E5%8A%A1%E4%B8%BAgoogle\"><span class=\"toc-text\">修改acme默认服务为google</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%86%99%E5%85%A5Google-key\"><span class=\"toc-text\">写入Google key</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AF%BC%E5%85%A5dns%E6%9C%8D%E5%8A%A1%E5%95%86key%EF%BC%88CF%E4%B8%BA%E4%BE%8B%EF%BC%89\"><span class=\"toc-text\">导入dns服务商key（CF为例）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6\"><span class=\"toc-text\">申请证书</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%81%E7%A7%BB%E8%AF%81%E4%B9%A6%E5%88%B0%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9\"><span class=\"toc-text\">迁移证书到指定文件夹</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0%E8%AF%81%E4%B9%A6%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">更新证书命令</span></a></li></ol></li></ol>","author":{"name":"6ird","slug":"6ird","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录互联网的那些事儿！","socials":{"github":"https://github.com/TriDiamond","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"mapped":true,"prev_post":{"title":"安装python采集环境","uid":"1089c2219ae72b6f52934db473c1fad8","slug":"python-crawling","date":"2022-12-20T09:54:59.000Z","updated":"2022-12-27T09:00:37.934Z","comments":true,"path":"api/articles/python-crawling.json","keywords":null,"cover":[],"text":" 安装chrome浏览器1、更新系统1sudo apt-get update sudo apt upgrade 2、安装依赖1sudo apt-get install libxss1 libappindicator1 libindicator7 sudo apt-get inst...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":3,"path":"api/categories/笔记.json"}],"tags":[{"name":"python","slug":"python","count":1,"path":"api/tags/python.json"},{"name":"采集","slug":"采集","count":1,"path":"api/tags/采集.json"}],"author":{"name":"6ird","slug":"6ird","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录互联网的那些事儿！","socials":{"github":"https://github.com/TriDiamond","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"feature":true},"next_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2022-11-21T07:04:21.362Z","updated":"2022-12-20T10:01:39.983Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":"https://cover.png","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the ...","link":"","photos":[],"count_time":{"symbolsCount":444,"symbolsTime":"1 mins."},"categories":[{"name":"默认","slug":"默认","count":1,"path":"api/categories/默认.json"}],"tags":[{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"},{"name":"github","slug":"github","count":1,"path":"api/tags/github.json"},{"name":"aurora","slug":"aurora","count":1,"path":"api/tags/aurora.json"}],"author":{"name":"6ird","slug":"6ird","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"记录互联网的那些事儿！","socials":{"github":"https://github.com/TriDiamond","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/7318914058","zhihu":"https://www.zhihu.com/people/tridiamond","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}}}}