[{"id":"1089c2219ae72b6f52934db473c1fad8","title":"安装python采集环境","content":"安装chrome浏览器1、更新系统1sudo apt-get update sudo apt upgrade\n2、安装依赖1sudo apt-get install libxss1 libappindicator1 libindicator7 sudo apt-get install unzip sudo apt-get install dpkg sudo apt-get install xvfb sudo apt-get install python3-pip\n3、下载安装包1wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\n4、安装chrome安装chrome，安装过程中由于缺少一些依赖而报错是正常的\n1sudo dpkg -i google-chrome-stable_current_amd64.deb\n#自动安装刚才缺少的依赖 \n1sudo apt-get install -f\n\n查看google 浏览器\n1whereis google-chrome\n\n5、安装ChromeDriver下载安装包，这里要重点注意，一定要下载最新版本的chromedriver，这样才能确保跟chrome的版本匹配。\n去chromedriver官网 https://chromedriver.chromium.org/找到当前最新的版本号，如下图所示代表当前最新的版本号是107.0.5304.62\n下载的时候只需要输入下面的命令即可，如果最新版本不是107.0.5304.62，只需要把下面107.0.5304.62替换成新版本的具体版本号即可。\n1wget -N https://chromedriver.storage.googleapis.com/107.0.5304.62/chromedriver_linux64.zip\n\n解压缩刚下载的安装包\n1unzip chromedriver_linux64.zip\n移动\n1sudo mv -f chromedriver /usr/local/share/chromedriver\n\n建立软链接\n1sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver sudo ln -s /usr/local/share/chromedriver /usr/bin/chromedriver\n\n查看安装版本号 \n1chromedriver --version\n\n##安装python的selenium以及其他相关依赖\n安装 selenium1pip3 install selenium\n\n由于python自带的urllib3模块存在问题，所以需要更新或重新安装，否则等下在python里面使用chrome时会报错TypeError: urlopen() got multiple values for keyword argument ‘body’\n1sudo pip3 install -U urllib3\n1pip3 install lxml pip3 install &quot;urllib3&lt;=1.24&quot;\n\n测试通过python的selenium调用chrome\n输入python3命令进入python3的交互式界面\n1python3\n\n后台运行命令：1nohup python3 -u /home/wwwroot/start.py &gt; /dev/null 2&gt;&amp;1 &amp;\n\n查看python进程1ps -ef | grep python","slug":"python-crawling","date":"2022-12-20T09:54:59.000Z","categories_index":"笔记","tags_index":"python,采集","author_index":"6ird"},{"id":"df96f11d8264a9a9b5c99533bffecbed","title":"使用acme申请google ssl证书","content":"获取Google account key首先登录 https://console.cloud.google.com/apis/library/publicca.googleapis.com?project=XXXXX \n 如果没有权限就点启用,然后点右上角的激活 cloud shell ,成功授权后在 Cloud Shell 获取需要签发的key 输入 \n 1gcloud beta publicca external-account-keys create\n复制，如下key:Created an external account key [b64MacKey: XXXXXXXXXXXX keyId: XXXXXXX]\n下载acme下载命令：1wget -O- https://get.acme.sh | sh\n重启1source ~/.bashrc\n修改acme默认服务为google1acme.sh --set-default-ca --server google\n写入Google key123acme.sh --register-account -m www@mail.com --server google--eab-kid XXXXXX--eab-hmac-key XXXX\n\n导入dns服务商key（CF为例）12export CF_Key=&quot;XXXX&quot;export CF_Email=&quot;www@mail.com&quot;\n\n申请证书1acme.sh --issue --dns dns_cf -d XXXX.com -d *.XXXX.com\n迁移证书到指定文件夹1234acme.sh --installcert -d XXXX.com--key-file /home/vhost/cert/XXXX.com/XXXX.com.key--fullchain-file /home/vhost/cert/XXXX.com/XXXX.com.cer--reloadcmd &quot;/usr/sbin/nginx -s reload -c /etc/nginx/nginx.conf&quot;\n\n更新证书命令1acme.sh --renew -d XXXX.com --force","slug":"acme-google-ssl","date":"2022-12-20T09:46:31.000Z","categories_index":"笔记","tags_index":"acme,google,ssl","author_index":"6ird"},{"id":"b9663f58f18133b35bfe243f3e916a80","title":"Hello World","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post1$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server1$ hexo server\n\nMore info: Server\nGenerate static files1$ hexo generate\n\nMore info: Generating\nDeploy to remote sites1$ hexo deploy\n\nMore info: Deployment\n","slug":"hello-world","date":"2022-11-21T07:04:21.362Z","categories_index":"默认","tags_index":"hexo,github,aurora","author_index":"6ird"}]